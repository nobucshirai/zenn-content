---
title: "ChatGPTプログラミングのすすめ"
emoji: "👀"
type: "tech"
topics: ["ChatGPT", "LLM", "Python3", "VSCode"]
published: true
---

June 8, 2024 by Nobu C. Shirai

ChatGPTなどの大規模言語モデル (Large Language Model; LLM) にプログラミングやリファクタリングをさせる場合、目的に合ったものが作られているかを何らかの方法で検証する必要がある。
プログラムの正しさを完全に保証する方法はないが、ある程度の正しさを継続して担保するための方法を探ってみたので以下にまとめた。
ポイントは、**ChatGPTの生成したプログラムの検証にもやはりChatGPTの力を借りること**である。

## 実行可能性と入出力のチェック

プログラムを生成するタスクである場合、いつでも「実行できるか？」というチェックが可能である。これは自然言語の生成と大きく異なる点だろう。実行可能性を確かめることは最低限のチェック項目になる。
エラーが出力された場合、自力で修正、もしくはエラーの内容をChatGPTに提示して修正を依頼し、再度実行可能かを確かめる。
入力・出力があるプログラムの場合、入力に対して期待した出力が得られるかどうかも確認する。

## VSCodeの編集履歴を確認

Visual Studio Code (VSCode) にはGitとの統合機能があり、最終commitからの変更箇所を簡単に確認できる。この機能を利用することで、コードの変更履歴を把握しやすくなる。VSCodeでgit管理されているファイルを開き、編集すると、最終commitからの変更箇所が色付きでハイライトされる。追加された行は緑、削除された行は赤、変更された行は青で表示される。

この機能はChatGPT頼みのリファクタリングや機能追加においても有用である。ChatGPTがどの部分を変更したのかを簡単に確認できるため、生成・修正されたコードの理解がしやすくなる。

## ヘルプオプションの生成

プログラムにヘルプオプション ( `-h` )を追加することで、ChatGPT自身にそのプログラムの用途や使い方を語らせることができる。このオプションのメッセージが意図したものと一致しているか確認する。
オプションを導入しておくと、機能をオプション単位で追加するようにChatGPTに依頼できるようになる点もメリットである。
Pythonであれば `argparse` 、Shellであれば `getopts` の名前をプロンプトに入れておくと成功することが多い。

## README.mdの生成

リポジトリやプログラムを作成した際には、使い方や目的について記述したREADME.mdを用意することが望ましい。しかし、README.mdを作成するのは手間がかかり、プログラムの変更に応じて更新する必要がある。そこで、ChatGPTにREADME.mdを作成してもらうと良い。
生成されたREADME.mdの内容を読み、自分の意図した動作と一致しているかを確認する。

## Docstringの生成

Docstringは関数・クラスの用途や動作を説明するためのコメントのこと。VSCodeでは、関数・クラスにカーソルを合わせたときに自動的にdocstringの内容がポップアップ表示される機能があり、自作の関数・クラスについてもこの機能が使えて便利である。README.mdと同様にChatGPTに作成してもらうと良い。

## 型ヒントの生成

型ヒント (type hint) は、関数の引数や戻り値の型を明示的に指定するためのもの。Pythonでは3.5以降で使用可能。コードの可読性を向上させ、エラーを未然に防ぐために有用なのでChatGPTに頼んで書いてもらうと良い。

## テストコードの生成

ChatGPTにある目的に対するコードを作成したとき、同時にそのコードのテストコードもChatGPTに作成させると良い。テストコードがあれば、そのコードの動作について別の観点から理解・確認できる上、さらなる更新をChatGPTにさせた場合にも、テストコードが通るかどうかでChatGPTの変更が正しいかどうかを確認できる。ChatGPTの生成の不確実さをある程度補完できるため、プログラムの品質向上につながる。
この方法のChatGPTが作ったものをChatGPTが作ったもので検証するという構図は面白いと思う。
